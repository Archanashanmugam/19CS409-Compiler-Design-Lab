# Ex. No : 11	
# IMPLEMENTATION OF CALCULATOR USING LEX AND YACC 
## Register Number :212222040010
## Date : 18.04.2024

## AIM   
To implement a calculator using LEX and YACC.

## ALGORITHM
1.	Start the program.
2.	Write a program in the vi editor and save it with .l extension.
3.	In the lex program, write the translation rules for the various mathematical functions.
4.	Write a program in the vi editor and save it with .y extension.
5.	Compile the lex program with lex compiler to produce output file as lex.yy.c. eg $ lex filename.l
6.	Compile the yacc program with yacc compiler to produce output file as y.tab.c. eg $ yacc â€“d arith_id.y
7.	Compile these with the C compiler as gcc lex.yy.c y.tab.c
8.	Enter an expression as input and it is evaluated and the answer is displayed as output.

## PROGRAM
'''
/*calculator.l*/

%{
#include"y.tab.h" 
#include<math.h> 
#include<stdio.h>
%}

%%

([0-9]+|([0-9]*\.[0-9]+)([eE][-+]?[0-9]+)?) {yylval.dval=atof(yytext); return NUMBER;}
log |
LOG {return LOG;} ln {return nLOG;} sin |
SIN {return SINE;} cos |
COS {return COS;} tan |
TAN {return TAN;} mem {return MEM;} [\t];
\$ {return 0;}
\n|. return yytext[0];

%%
/*calculator.y*/
%{
#include<stdio.h> #include<stdlib.h> #include<error.h> double memvar;
%}
%union

{
double dval;
}

%token<dval> NUMBER
%token<dval> MEM
%token LOG SINE nLOG COS TAN
%left '-' '+'
%left '*' '/'
%right '^'
%left LOG SINE nLOG COS TAN
%nonassoc UMINUS
%type <dval> expression

%%
start:statement'\n'
| start statement'\n'
;

statement: MEM '=' expression { memvar=$3;}
| expression {printf( "Answer=%g\n",$1);}
;
expression:expression '+' expression {$$=$1+$3;}
| expression '-' expression {$$=$1-$3;}
| expression '*' expression {$$=$1*$3;}
| expression '/' expression

{
if($3==0)
yyerror("DIVIDE BY ZERO");
else
$$=$1/$3;
}

| expression '^' expression {$$=pow($1,$3);}
;
expression: '_' expression %prec UMINUS {$$=-$2;}
| '(' expression ')' {$$=$2;}
| LOG expression {$$=log($2)/log(10);}
| nLOG expression {$$=log($2);}
| SINE expression {$$=sin($2*3.141592654/180);}
| COS expression {$$=cos($2*3.141592654/180);}
| TAN expression {$$=tan($2*3.141592654/180);}
| NUMBER {$$=$1;}
| MEM {$$=memvar;}
;
%%
main()
{
printf("Enter the expression:"); 
yyparse();
}

int yyerror(char *error)
{
fprintf(stderr,"%s\n",error);

}
'''

## OUTPUT 
![image](https://github.com/Archanashanmugam/19CS409-Compiler-Design-Lab/assets/119291338/dc9ba747-c092-4a54-9343-3d19553343ef)

## RESULT
The calculator is implemented using LEX and YACC and the output is verified.
